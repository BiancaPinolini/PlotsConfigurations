#include <TMVA/Reader.h>

using namespace std;

float mth,mtw2,metTtrk,drll,ptll;//mpmet,mtw2,metTtrk,drll,mtw1,mll,ptll,dphilmet,dphilmet1,dphilmet2,pt1,pt2,metPfType1,dphill;

TMVA::Reader* myreader = new TMVA::Reader();

void initMyReader(){

  myreader->AddVariable("mth",                     &mth);
  myreader->AddVariable("mtw2",                    &mtw2);
  myreader->AddVariable("metTtrk",                 &metTtrk);
  myreader->AddVariable("drll",                    &drll);
  myreader->AddVariable("ptll",                    &ptll);
  // myreader->AddVariable("mpmet",                   &_mpmet);
  // myreader->AddVariable("mtw1",                    &_mtw1);
  // myreader->AddVariable("mll",                     &_mll);
  // myreader->AddVariable("dphilmet",                &_dphilmet);
  // myreader->AddVariable("dphilmet1",               &_dphilmet1);
  // myreader->AddVariable("dphilmet2",               &_dphilmet2);
  // myreader->AddVariable("std_vector_lepton_pt[0]", &_pt1);
  // myreader->AddVariable("metPfType1",              &_metPfType1);
  // myreader->AddVariable("dphill",                  &_dphill);
  // myreader->AddVariable("std_vector_lepton_pt[1]", &_pt2);

  TString direction = "";

  direction = "/afs/cern.ch/user/n/ntrevisa/work/CMSSW_8_0_26_patch1/src/MUCCA/Optimization/Weights-2HDM_TTbar_5var_em_high/TMVAClassification_BDTG18.weights.xml";

  cout<<direction<<endl;
  myreader->BookMVA("BDTG18",direction);
}



float mucca2HDMgrad(float mthe,
		     float mtw2e,
		     float metTtrke,
		     float drlle,
		     float ptlle
		     // float mpmete,
		     // float mtw1e,
		     // float mlle,
		     // float dphilmete,
		     // float dphilmet1e
		     // float dphilmet2e,
		     // float pt1e,
		     // float metPfType1e,
		     // float dphille,
		     // float pt2e
		     ){

  mth        = mthe;
  mtw2       = mtw2e;
  metTtrk    = metTtrke;
  drll       = drlle;
  ptll       = ptlle;
  // mpmet      = mpmete;
  // mtw1       = mtw1e;
  // mll        = mlle;
  // dphilmet   = dphilmete;
  // dphilmet1  = dphilmet1e;
  // dphilmet2  = dphilmet2e;
  // pt1        = pt1e;
  // metPfType1 = metPfType1e;
  // dphill     = dphille;
  // pt2        = pt2e;

  //cout<<"BEFORE READING!!!!!!-------"<<endl;

  return  myreader->EvaluateMVA("BDTG18");
}             
